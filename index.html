<!DOCTYPE html>
<html>
<head>
<style>
#gun{
position: absolute;
    left: 50%;
    bottom: 0px;
 }
 #reloadGun{
 position:absolute;
  left: 50%;
  bottom: 0px;
 }
 #background{
 background-size: cover;
 }
 </style>
</head>
<body>
    <p id = "text"></p>
    <p id = "ammo"></p>
 <img id = "background" scr = "PnuematicPysco.github.com/background.jpg">
 <img id = "gun" scr = "PnuematicPysco.github.com/gun.png" width = "250" height = "250">
 <img id = "reloadGun" scr = "PnuematicPysco.github.com/reload.png" width = "250" height = "250">
    <script>
       var gun = document.getElementById("gun");
var reloadGun = document.getElementById("reloadGun");

reloadGun.style.display = "none";

document.onkeydown = function (event) {
      switch (event.keyCode) {
        case 32:
        reloadGun.style.display = "";
        gun.style.display = "none";
        setTimeoutFunction(function(){
        reloadGun.style.display = "none";
        gun.style.display = "";
        }, 500);
      }}; 
    </script>
 <script>
     var monsterId = [];
var monsterShot = [];
var monsterX = [];
var monsterZ = [];
var monsters = 1;
var totalMonsters = Math.floor(Math.random() * 30);
var objectId = [];
var objectX = [];
var objectZ = [];
var objects = Math.floor(Math.random() * 30);
var x = 0;
var z = 0;
var rotate = 0;
var challengeMode = false;
var ammo = 5;
var textElement = document.getElementById("text");
var ammoText = document.getElementById("ammo");
     

 var j;
 for(j = 0;j < objects;j++){
 var object = document.createElement("img");
 object.setAttribute("id", "object" + i);
 object.setAttribute("style", "bottom: 200px");
 var randomNum = Math.floor(Math.random() * 2);
 if(randomNum == 0){
  object.setAttribute("scr", "PnuematicPysco.github.com/skyscrapper.png");
 }
 if(randomNum == 1){
 object.setAttribute("scr", "PnuematicPysco.github.com/burningcar.jpg");
 }
 if(randomNum == 2){
  object.setAttribute("scr", "PnuematicPysco.github.com/wallPixel.jpeg");
 }
  var randomX = Math.floor(Math.random() * 20000) - 10000;
  var randomZ = Math.floor(Math.random() * 20000) - 10000;
  objectX.push(randomX);
  objectZ.push(randomZ);
  objectId.push("object" + i);
 }



    var i;
for(i = 0;i < totalMonsters;i++){
 var monster = document.createElement("img");
  monster.setAttribute("id", "monster" + monsters);
  monster.setAttribute("scr", "PnuematicPysco.github.com/monster1.png");
  monster.setAttribute("style", "bottom: 200px");
 var randomX = Math.floor(Math.random() * 20000) - 10000;
  var randomZ = Math.floor(Math.random() * 20000) - 10000;
  monsterX.push(randomX);
  monsterZ.push(randomZ);
  monsterShot.push("notShot");
  monsterId.push("monster" + monsters);
  monsters++;
}


function moveMonsters(){
var i;
for(i = 0;i < totalMonsters;i++){
if(monsterShot[i] != "Shot"){
if(monsterX[i] > x){
var j;
for(j = 0;j < 100;j++){
setTimeout(function(){
monsterX[i]++;
}, 10);
}
}else{
var k;
for(k = 0;k < 100;k++){
setTimeout(function(){
monsterX[i]--;
}, 10);
}
}
if(monsterZ[i] > z){
var l;
for(l = 0;l < 100;l++){
setTimeout(function(){
monsterZ[i]++;
}, 10);
}
}else{
 var m;
for(m = 0;m < 100;m++){
setTimeout(function(){
monsterZ[i]--;
}, 10);
}
}
} 
}
if(monsterZ[i] < z + 50){
if(monsterX[i] < x + 50){
if(monsterZ[i] > z - 50){
if(monsterX[i] > x - 50){
if(monsterShot[i] != "Shot"){
var body = document.getElementById("world");
body.style.display = "none";
}}}}}
}

function fake3D(){
var i;
for(i = 0;i < totalMonsters;i++){
var monster = document.getElementById("monster" + i);
var monsterSize = 0;
ammoText.innerHtml = "ammo: " + ammo;
if(monsterZ[i] > z){
var graphicZ = monsterZ[i] - z - 500;//make move and pos (num * 5) to balance it out
if(graphicZ > 0){
monster.style.height = ""+graphicZ - graphicZ - graphicZ+"px";
monster.style.width = ""+graphicZ - graphicZ - graphicZ+"px";
monsterSize = graphicZ - graphicZ - graphicZ;
}else{
monster.style.height = ""+graphicZ + graphicZ + graphicZ+"px";
monster.style.width = ""+graphicZ + graphicZ + graphicZ+"px";
monsterSize = graphicZ + graphicZ + graphicZ;
}
monster.style.transform = "translateX("+x - monsterX[i] - rotate+"px)";
}else{
var graphicZ = monsterZ[i] - z + 500;//make move and pos (num * 5) to balance it out
if(graphicZ > 0){
object.style.height = ""+graphicZ - graphicZ - graphicZ+"px";
monster.style.width = ""+graphicZ - graphicZ - graphicZ+"px";
monsterSize = graphicZ - graphicZ - graphicZ;
}else{
monster.style.height = ""+graphicZ + graphicZ + graphicZ+"px";
monster.style.width = ""+graphicZ + graphicZ + graphicZ+"px";
monsterSize = graphicZ + graphicZ + graphicZ;
}
var oppositeRotate = x - monsterX[i] - rotate;
monster.style.transform = "translateX("+oppositeRotate + oppositeRotate + oppositeRotate+"px)";
}
if(monsterShot[i] == "Shot"){
monster.style.scr = "PnuematicPysco.github.com/bleedingMonster.png";
monster.style.height = ""+monsterSize * 0.3+"px";
monster.style.width = ""+monsterSize+"px";
}
if(monsterShot[i] == "bleeding"){
monster.style.scr = "PnuematicPysco.github.com/bleedingMonster.png";
monster.style.height = ""+monsterSize+"px";
monster.style.width = ""+monsterSize+"px";
}
}
}


function object3D(){
var i;
for(i = 0;i < objects;i++){
var object = document.getElementById(objectId[i]);
if(objectZ[i] > z){
var graphicZ = objectZ[i] - z - 500;//make move and pos (num * 5) to balance it out
if(graphicZ > 0){
object.style.height = ""+graphicZ - graphicZ - graphicZ+"px";
object.style.width = ""+graphicZ - graphicZ - graphicZ+"px";
}else{
object.style.height = ""+graphicZ + graphicZ + graphicZ+"px";
object.style.width = ""+graphicZ + graphicZ + graphicZ+"px";
}
object.style.transform = "translateX("+x - objectX[i] - rotate+"px)";
}else{
var graphicZ = objectZ[i] - z + 500;//make move and pos (num * 5) to balance it out
if(graphicZ > 0){
object.style.height = ""+graphicZ - graphicZ - graphicZ+"px";
object.style.width = ""+graphicZ - graphicZ - graphicZ+"px";
}else{
object.style.height = ""+graphicZ + graphicZ + graphicZ+"px";
object.style.width = ""+graphicZ + graphicZ + graphicZ+"px";
}
var oppositeRotate = x - objectX[i] - rotate;
object.style.transform = "translateX("+oppositeRotate + oppositeRotate + oppositeRotate+"px)";
}
}
}

function shoot(){
var i;
for(i = 0;i < totalMonsters;i++){
var monster = document.getElementById(monsterId[i]);
var Rotate2 = x - monsterX[i] - rotate;
var oppositeRotate = Rotate2 + Rotate2 + Rotate2;
if(monsterZ[i] > z){
var graphicZ = monsterZ[i] - z - 500;
if(graphicZ > 0){
if(Rotate2 > -10){
if(Rotate2 < 10){
if(monsterShot[i] == "bleeding"){
if(ammo > 0){
monsterShot[i] = "Shot";
ammo--;
ammo + 5;
}else{
textElement.innerHtml("no more ammo");
}
}
if(monsterShot[i] == "notShot"){
if(challengeMode == false){
monsterShot[i] = "Shot";
}else{
if(ammo > 0){
monsterShot[i] = "bleeding";
ammo--;
}else{
textElement.innerHtml("no more ammo");
}
}
}}}}
}else{
var graphicZ = monsterZ[i] - z - 500;
if(graphicZ > 0){
if(oppositeRotate > -10){
if(oppositeRotate < 10){
if(monsterShot[i] == "bleeding"){
if(ammo > 0){
monsterShot[i] = "Shot";
ammo--;
ammo + 5;
}else{
textElement.innerHtml("no more ammo");
}
}
if(monsterShot[i] == "notShot"){
if(challengeMode == false){
monsterShot[i] = "Shot";
}else{
if(ammo > 0){
monsterShot[i] = "bleeding";
ammo--;
}else{
textElement.innerHtml("no more ammo");
}
}
}}}}
}
}
}


document.addEventListener('keydown', (event) => {
  var name = event.key;
  var code = event.code;
 
 if(name == "w"){
 z = z + 50;
 }
 if(name == "a"){
 x = x - 50;
 }
 if(name == "s"){
 z = z - 50;
 }
 if(name == "d"){
 x = x + 50;
 }
 if(name == "c"){
 challengeMode = true;
 }
}, false);

document.onkeydown = function (event) {
      switch (event.keyCode) {
         case 37:
            rotate = rotate - 50;
            if(rotate < -180 * 5){
            rotate = 180 * 5;
            }
            break;
         case 39:
            rotate = rotate + 50;
            if(rotate > 180 * 5){
            rotate = -180 * 5;
            }
            break;
        case 32:
        shoot();
      }};


window.setInterval(fake3D, 1);
window.setInterval(object3D, 1);
window.setInterval(moveMonsters, totalMonsters * 1000);
    </script>
</body>
</html>
